# 概要

タスク、スケジュール管理アプリ

# タスク・スケジュール管理アプリ 要件定義・仕様書

## 1. アプリケーション概要

タスク管理とスケジュール管理をシームレスに行えるWebアプリケーション。
作成したタスクに日程・期限を持たせ、必要に応じてGoogleカレンダーへ予定として連携（書き込み）ができる。
まずは個人利用を目的として開発を開始し、最終的には他のユーザーも利用できるSaaS型のWebアプリとしての公開を目指す。

## 2. 使用技術・インフラ

- **フロントエンド**: Next.js, shadcn/ui
- **バックエンド・データベース**: Supabase (PostgreSQL)
- **認証**: Supabase Auth
- **ホスティング**: Vercel
- **外部API**: Google Calendar API
- **リンタ、フォーマッタ**: Biome

また、アーキテクチャにはFSDを採用する
ただしprocesses層は使わなくてよさそうなのでいらない
UIは基本的にshadcnを使う

## 3. 機能要件

### 3.1. 認証機能

- Supabase Authを利用したログイン機能。
- Googleログインのみをサポートする。

### 3.2. タスク管理機能

- **タスクの作成・編集・削除・一覧表示 (CRUD)**
- **タスクが持つデータ項目**:
    - タイトル
    - 期限または日程
    - ステータス（未着手、進行中、完了）
    - 優先度（高、中、低）

### 3.3. ビュー（表示切り替え）機能

- **デフォルト表示**: ホーム画面にて、期限間近のタスクをテーブル形式（shadcn/uiのDataTable等）で表示。
- **カレンダー表示**: スイッチ操作で、タスクをカレンダー上のUIに切り替えて表示。

### 3.4. Googleカレンダー連携機能

- **予定の追加 (Writeのみ)**:
    - タスク作成時、そのタスクをGoogleカレンダーの予定としても追加するかどうかを任意で選択可能。
- **ゲストの追加・管理**:
    - **事前登録**: ユーザー設定画面にて、頻繁に共有する別のGoogleアカウント（メールアドレス）をゲストリストとして登録可能。
    - **予定追加時の招待**: カレンダーへの予定追加時、事前登録したリストからゲストを選択し、予定の招待（ゲスト追加）を行うことができる。

## 4. データベース設計（初期案）

Supabase (PostgreSQL) を使用して以下のデータを管理する。

### `tasks` テーブル

| カラム名 | 型 | 説明 |
| --- | --- | --- |
| `id` | UUID (PK) | タスクの一意のID |
| `user_id` | UUID (FK) | 作成者のユーザーID (Supabase Authと連携) |
| `title` | Text | タスクのタイトル |
| `due_date` | Timestamp | 期限または日程 |
| `status` | Enum | 未着手(`todo`), 進行中(`in_progress`), 完了(`done`) |
| `priority` | Enum | 高(`high`), 中(`medium`), 低(`low`) |
| `is_gcal_synced` | Boolean | Googleカレンダーへ追加済みかどうかのフラグ |
| `created_at` | Timestamp | 作成日時 |
| `updated_at` | Timestamp | 更新日時 |

### `guest_contacts` テーブル（事前登録ゲストリスト）

| カラム名 | 型 | 説明 |
| --- | --- | --- |
| `id` | UUID (PK) | ゲスト連絡先の一意のID |
| `user_id` | UUID (FK) | 登録したユーザーのID |
| `email` | Text | ゲストのGoogleアカウント（メールアドレス） |
| `name` | Text | 表示名（任意） |

### `task_guests` テーブル（タスクとゲストの中間テーブル）

| カラム名 | 型 | 説明 |
| --- | --- | --- |
| `task_id` | UUID (FK) | 紐づくタスクのID |
| `guest_contact_id` | UUID (FK) | 紐づくゲスト連絡先のID |

## 5. 今後の検討事項・特記事項
- supabase authのGoogle OAuthにGoogle Calendar APIも持たせてるので、もしかしたらそこからいい感じにAPI叩けるかも？
